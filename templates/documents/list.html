<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document List</title>
    <style>
        .document-preview {
            display: none;
            margin-top: 20px;
        }
        .document-preview.active {
            display: block;
        }
        iframe {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <h1>Document List</h1>
    <ul>
        {% if documents|length == 0 %}
            <li>No documents found.</li>
        {% else %}
            {% for document in documents %}
                <li>
                    <a href="{{ url_for('documents.preview', document_id=document.id) }}">{{ document.title }}</a>
                    - {{ document.description }}
                    - Uploaded by: {{ document.uploader.email }}
                    - {% if document.approved == True %}
                        Approved
                    {% else %}
                        Not Approved
                    {% endif %}
                    {% if document.uploaded_by == current_user.id %}
                        <a href="{{ url_for('documents.edit', document_id=document.id) }}">Edit</a>
                        <form action="{{ url_for('documents.delete', document_id=document.id) }}" method="POST" style="display:inline;">
                            <button type="submit">Delete</button>
                        </form>
                    {% endif %}
                </li>
            {% endfor %}
        {% endif %}
    </ul>
    <div class="document-preview {% if selected_document %}active{% endif %}">
        {% if selected_document %}
            <iframe id="preview-frame" src="{{ url_for('documents.serve_file', document_id=selected_document.id) }}"></iframe>
        {% endif %}
    </div>
</body>
</html>